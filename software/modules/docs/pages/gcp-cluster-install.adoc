= Install ThoughtSpot clusters in GCP
:last_updated: 2/27/2020


Learn how to install ThoughtSpot clusters in GCP.

== Prerequisites

Before you can install your ThoughtSpot clusters in GCP, complete these prerequisites.

. *Review configuration options* Refer to link:{{ site.baseurl }}/appliance/gcp/configuration-options.html[GCP configuration options] for detailed instance specs.
. *Create the instance* Refer to link:{{ site.baseurl }}/appliance/gcp/launch-an-instance.html[Set up ThoughtSpot in GCP] to create and launch your instance.
. *Review required ports* Refer to link:{{ site.baseurl }}/appliance/ports.html[Network ports] to view the required ports for successful operation of ThoughtSpot.
. *Configure nodes* Refer to link:{{ site.baseurl }}/appliance/gcp/installing-gcp.html[Configure ThoughtSpot nodes in GCP] to configure your nodes.

[#cluster-install]
== Install ThoughtSpot Software

Install the cluster using the ThoughtSpot software release bundle.
The estimated installation time is one hour.
Follow the steps in this checklist.

[cols=2*]
|===
| &#10063;
| <<cluster-step-1,Step 1: Run the installer>>

| &#10063;
| <<cluster-step-2,Step 2: Check cluster health>>

| &#10063;
| <<cluster-step-3,Step 3: Finalize installation>>
|===

Refer to your welcome letter from ThoughtSpot to find the link to download the release bundle.
If you do not have a link, open a support ticket with link:{{ site.baseurl }}/appliance/contact.html[ThoughtSpot Support] to request access to the release bundle.

[#cluster-step-1]
=== Step 1: Run the installer

. Copy the downloaded release bundle to `/export/sdc1/TS_TASKS/install` using the following command:
+
----
 $ scp <release-number>.tar.gz admin@<hostname>:/export/sdc1/TS_TASKS/install/<file-name>
----
+
Note the following parameters:

 ** `release-number` is the release number of your ThoughtSpot instance, such as 5.3, 6.0, and so on.
 ** `hostname` is your specific hostname.
 ** `file-name` is the name of the tarball file on your local computer.

+
{% include note.html content="You can use another secure copy method, if you prefer a method other than the `scp` command." %}

. Alternatively, use `tscli fileserver download-release` to download the release bundle.
+ You must link:{{ site.baseurl }}/reference/tscli-command-ref.html#tscli-fileserver[configure the fileserver] by running `tscli fileserver configure` before you can download the release.
+
+
----
 $ tscli fileserver download-release <release-number> --user <username> --out <release-location>
----
+
Note the following parameters:

 ** `release-number` is the release number of your ThoughtSpot instance, such as 5.3, 5.3.1, 6.0, and so on.
 ** `username` is the username for the fileserver that you set up earlier, when configuring the fileserver.
 ** `release-location` is the location path of the release bundle on your local machine.
For example, `/export/sdc1/TS_TASKS/install/6.0.tar.gz`.

. Verify the checksum to ensure you have the correct release.
+ Run `md5sum -c <release-number>.tar.gz.MD5checksum`.
+
----
 $ md5sum -c <release-number>.tar.gz.MD5checksum
----
+
Your output says `ok` if you have the correct release.

. Launch a https://linux.die.net/man/1/screen[screen] session.
Use screen to ensure that your installation does not stop if you lose network connectivity.
+
----
 $ screen -S DEPLOYMENT
----

. Create the cluster.
+ Run `tscli cluster create` to create the cluster.
+ If you are using a gcs bucket for object storage, include the flag `--enable_cloud_storage=gcs`.
+
----
 $ tscli cluster create <release-number>.tar.gz --enable_cloud_storage=gcs
----

{% include content/install/cluster-steps1through3.md %}

== Lean configuration

*(For use with thin provisioning only)* If you have a link:{{ site.baseurl }}/appliance/cloud.html#use-small-and-medium-instance-types-when-applicable[small or medium instance type], with less than 100GB of data, advanced lean configuration is required before loading any data into ThoughtSpot.
After installing the cluster, configure advanced lean mode.

To configure advanced lean mode, do the following:

. SSH as admin into your ThoughtSpot cluster, using the following syntax: + `ssh admin@<cluster-ip-address or hostname>`.
. Run the advanced lean mode configuration using the following syntax: + `tscli config-mode lean [-h] --type {small,medium,default}`.
+
Examples:

 ** To configure your instance with the "small" data size, run: `tscli config-mode lean [-h] --type small`
 ** To configure your instance with the "medium" data size, run: `tscli config-mode lean [-h] --type medium`

+
{% include note.html content="If you decide later you want to disable advanced lean mode, use `default`." %}

== Additional resources

As you develop your expertise in GCP cluster installation, we recommend the following ThoughtSpot U course:

* https://training.thoughtspot.com/create-upgrade-patch-a-thoughtspot-cluster/430642[Create a Cluster]

See other training resources at + https://training.thoughtspot.com/[<img src="{{ "/images/ts-u.png" | prepend: site.baseurl }}" alt="ThoughtSpot U">]

== Related information

Use these references for successful installation and administration of ThoughtSpot:

* link:{{ site.baseurl }}/appliance/hardware/nodesconfig-example[The nodes.config file]
* link:{{ site.baseurl }}/appliance/hardware/parameters-nodesconfig.html[Parameters of the nodes.config file]
* link:{{ site.baseurl }}/appliance/hardware/cluster-create.html[Using the tscli cluster create command]
* link:{{ site.baseurl }}/appliance/hardware/parameters-cluster-create.html[Parameters of the cluster create command]
* link:{{ site.baseurl }}/appliance/contact.html[Contact Support]
